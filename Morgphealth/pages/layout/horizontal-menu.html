<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from www.urbanui.com/melody/template/pages/layout/horizontal-menu.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 15 Sep 2018 06:05:55 GMT -->
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Morgphealth</title>
  <!-- plugins:css -->
  <link rel="stylesheet" href="../../vendors/iconfonts/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="../../vendors/css/vendor.bundle.base.css">
  <link rel="stylesheet" href="../../vendors/css/vendor.bundle.addons.css">
  <!-- endinject -->
  <!-- plugin css for this page -->
  <!-- End plugin css for this page -->
  <!-- inject:css -->
  <link rel="stylesheet" href="../../css/style.css">
  <!-- endinject -->
  <link rel="shortcut icon" href="../../images/morgp-logo.png" />
</head>
<body class="horizontal-menu">
  <div class="container-scroller">
    <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row default-layout-navbar">
      <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
        <a class="navbar-brand brand-logo" id="dashboardLink2" href="#"><img src="../../images/morgp-logo.png"
            alt="logo" /></a>
        <!-- <a class="navbar-brand brand-logo-mini" href="index-2.html"><img src="images/logo-mini.svg" alt="logo" /></a> -->
      </div>
      <div class="navbar-menu-wrapper d-flex align-items-stretch">
        <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
          <span class="fas fa-bars"></span>
        </button>
        <ul class="navbar-nav">

        </ul>
        <ul class="navbar-nav navbar-nav-right">



          <li class="nav-item nav-profile dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" id="profileDropdown">
              <img
                src="https://img.freepik.com/free-psd/3d-illustration-person-with-sunglasses_23-2149436188.jpg?t=st=1732891583~exp=1732895183~hmac=bec7d15f7ddd8474d4b01334c7b9e17e68ea4dda32624000b2e633c32b496fea&w=740"
                alt="profile" />
            </a>
            <div class="dropdown-menu dropdown-menu-right navbar-dropdown" aria-labelledby="profileDropdown">
              <div class="dropdown-divider"></div>

              <a class="dropdown-item" id="signoutLink">
                <i class="fas fa-power-off text-primary"></i> Sign Out
              </a>

            </div>
          </li>
          <li class="nav-item nav-settings d-none d-lg-block">
            <a class="nav-link" href="#">
              <i class="fas fa-ellipsis-h"></i>
            </a>
          </li>
        </ul>
        <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button"
          data-toggle="offcanvas">
          <span class="fas fa-bars"></span>
        </button>
      </div>
    </nav>
    <div class="container-fluid page-body-wrapper">
      <div class="main-panel">
        <div class="content-wrapper">
          <div class="page-header">
            <h3 class="page-title">
              Dashboard
            </h3>
          </div>
          <div class="row grid-margin">
            <div class="col-12">
              <div class="card card-statistics">
                <div class="card-body">
                  <div class="d-flex flex-column flex-md-row align-items-center justify-content-between">
                    <div class="statistics-item">
                      <p>
                        <i class="icon-sm fa fa-user mr-2"></i>
                        Doctors
                      </p>
                      <h2 id="totalDoctors">0</h2> <!-- Default value, will be updated -->
                    </div>
                    <div class="statistics-item">
                      <p>
                        <i class="icon-sm fas fa-calendar-check mr-2"></i>
                        Appointments
                      </p>
                      <h2 id="totalAppointments">0</h2> <!-- Default value, will be updated -->
                    </div>
                    <div class="statistics-item">
                      <p>
                        <i class="icon-sm fas fa-user-injured mr-2"></i>
                        Patients
                      </p>
                      <h2 id="totalPatients">0</h2> <!-- Default value, will be updated -->
                    </div>
                    <!-- New Statistics for Total Earnings and Total Sales -->
                    <div class="statistics-item">
                      <p>
                        <i class="icon-sm fas fa-dollar-sign mr-2"></i>
                        Total Earnings
                      </p>
                      <h2 id="totalEarnings">0.00</h2> <!-- Default value, will be updated -->
                    </div>
                    <div class="statistics-item">
                      <p>
                        <i class="icon-sm fas fa-shopping-cart mr-2"></i>
                        Total Sales
                      </p>
                      <h2 id="totalSales">0.00</h2> <!-- Default value, will be updated -->
                    </div>
                    <div class="statistics-item">
                      <p>
                        <i class="icon-sm fas mr-2"></i>
                        Total Insurance
                      </p>
                      <h2 id="totalInsurance">0.00</h2> <!-- Default value, will be updated -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>


          <div class="row">
            <div class="col-md-6 grid-margin stretch-card">
              <div class="card" style="margin-top: 30px;">
                <div class="card-body">
                  <h4 class="card-title">
                    <i class="fas fa-chart-line"></i>
                    Total Sales
                  </h4>

                  <!-- Display Total Sales -->
                  <h2 class="mb-5" id="totalSalesDisplay">0.00 <span
                      class="text-muted h4 font-weight-normal">Sales</span></h2>

                  <!-- ApexCharts Container for Total Sales Chart -->
                  <div id="chart-container-2" style="width: 100%; height: 300px;">
                    <div id="total-sales-chart"></div> <!-- ApexChart for Total Sales -->
                  </div>


                  <button id="download-csv-sales-btn" class="btn btn-success">Download Data as CSV</button>
                  <button id="download-json-sales-btn" class="btn btn-info">Download Data as JSON</button>
                </div>
              </div>


            </div>
            <div class="col-md-6 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">
                    <i class="fas fa-chart-line"></i>
                    Total Earnings
                  </h4>

                  <!-- Display Total Earnings -->
                  <h2 class="mb-5" id="totalEarningsDisplay">0.00 <span
                      class="text-muted h4 font-weight-normal">Sales</span></h2>

                  <!-- ApexCharts Container for Total Earnings Chart -->
                  <div id="chart-container-1" style="width: 100%; height: 300px;">
                    <div id="sales-chart-1"></div> <!-- ApexChart for Total Earnings -->
                  </div>
                  <button id="download-csv-btn" class="btn btn-success" style="margin-top: 20px;">Download Data as
                    CSV</button>
                  <button id="download-json-btn" class="btn btn-info" style="margin-top: 20px;">Download Data as
                    JSON</button>
                </div>
              </div>


            </div>
          </div>
          <div class="row">
            <div class="col-md-4 grid-margin stretch-card">

              <div class="flex-grow-1 d-flex flex-column justify-content-between">
                <!-- Pie chart container with added class for better styling -->
                <div id="doctors-gender-chart" class="chart-container"></div>
              </div>

            </div>


            <div class="col-md-4 grid-margin stretch-card">
              <!-- <div class="card">
                <div class="card-body">
                  <h4 class="card-title">
                    <i class="far fa-futbol"></i>
                    Activity
                  </h4>
                  <ul class="solid-bullet-list">
                    <li>
                      <h5>4 people shared a post
                        <span class="float-right text-muted font-weight-normal small">8:30 AM</span>
                      </h5>
                      <p class="text-muted">It was an awesome work!</p>
                      <div class="image-layers">
                        <div class="img-sm profile-image-text bg-warning rounded-circle image-layer-item">M</div>
                        <img class="img-sm rounded-circle image-layer-item" src="images/faces/face3.jpg" alt="profile"/>
                        <img class="img-sm rounded-circle image-layer-item" src="images/faces/face5.jpg" alt="profile"/>
                        <img class="img-sm rounded-circle image-layer-item" src="images/faces/face8.jpg" alt="profile"/>
                      </div>
                    </li>
                    <li>
                      <h5>Stella posted in a group
                        <span class="float-right text-muted font-weight-normal small">11:40 AM</span>
                      </h5>
                      <p class="text-muted">The team has done a great job</p>
                    </li>
                    <li>
                      <h5>Dobrick posted in material
                        <span class="float-right text-muted font-weight-normal small">4:30 PM</span>
                      </h5>
                      <p class="text-muted">Great work. Keep it up!</p>
                    </li>
                  </ul>
                  <div class="border-top pt-3">
                    <div class="d-flex justify-content-between">
                      <button class="btn btn-outline-dark">More</button>
                      <button class="btn btn-primary btn-icon-text">
                        Add new task
                        <i class="btn-icon-append fas fa-plus"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div> -->
            </div>
            <div class="col-md-4 grid-margin stretch-card">
              <div class="card">
                <div class="card-body d-flex flex-column">
                  <h4 class="card-title">
                    <i class="fas fa-tachometer-alt"></i>
                    Patients By Region
                  </h4>
                  <p class="card-description">User distribution across different regions</p>
                  <div class="flex-grow-1 d-flex flex-column justify-content-between">
                    <canvas id="user-region-chart" class="mt-3 mb-3 mb-md-0"></canvas>
                    <div id="user-region-chart-legend" class="user-region-chart-legend pt-4 border-top"></div>
                  </div>
                </div>
              </div>
            </div>

          </div>
          <div class="row">
            <div class="col-12 grid-margin">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">
                    <i class="fas fa-envelope"></i>
                    Insurance
                  </h4>
                  <div class="table-responsive">
                    <table class="table">
                      <tbody>
                        <tr>
                          <td>
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input">
                              </label>
                            </div>
                          </td>
                          <td class="py-1">
                            <!-- <img src="images/faces/face13.jpg" alt="profile" class="img-sm rounded-circle"/> -->
                          </td>
                          <td class="font-weight-bold">

                          </td>
                          <td>
                            <label class="badge badge-light badge-pill"></label>
                          </td>
                          <td>

                          </td>
                          <td>
                            <i class="fas fa-ellipsis-v"></i>
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input">
                              </label>
                            </div>
                          </td>
                          <td class="py-1">
                            <!-- <img src="images/faces/face2.jpg" alt="profile" class="img-sm rounded-circle"/> -->
                          </td>
                          <td class="font-weight-bold">

                          </td>
                          <td>
                            <label class="badge badge-light badge-pill"></label>
                          </td>
                          <td>

                          </td>
                          <td>
                            <i class="fas fa-ellipsis-v"></i>
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input">
                              </label>
                            </div>
                          </td>
                          <td class="py-1">
                            <!-- <div class="img-sm rounded-circle bg-warning profile-image-text"></div> -->
                          </td>
                          <td class="font-weight-bold">

                          </td>
                          <td>
                            <label class="badge badge-light badge-pill"></label>
                          </td>
                          <td>

                          </td>
                          <td>
                            <i class="fas fa-ellipsis-v"></i>
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input">
                              </label>
                            </div>
                          </td>
                          <td class="py-1">
                            <!-- <img src="images/faces/face11.html" alt="profile" class="img-sm rounded-circle"/> -->
                          </td>
                          <td class="font-weight-bold">

                          </td>
                          <td>
                            <label class="badge badge-light badge-pill"></label>
                          </td>
                          <td>

                          </td>
                          <td>
                            <i class="fas fa-ellipsis-v"></i>
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <div class="form-check">
                              <label class="form-check-label">
                                <input type="checkbox" class="form-check-input">
                              </label>
                            </div>
                          </td>
                          <td class="py-1">
                            <!-- <div class="img-sm rounded-circle bg-info profile-image-text"></div> -->
                          </td>
                          <td class="font-weight-bold">

                          </td>
                          <td>
                            <label class="badge badge-light badge-pill"></label>
                          </td>
                          <td>

                          </td>
                          <td>
                            <i class="fas fa-ellipsis-v"></i>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-8 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">
                    <i class="fas fa-table"></i>
                    Latest Appointments
                  </h4>
                  <div class="table-responsive">
                    <table class="table">
                      <thead>
                        <tr>
                          <th>Patient</th>
                          <th>Slot</th>
                          <th>Patient Email</th>
                          <th>Doc Name</th> <!-- Added Doctor Name Column -->
                          <th>Payment Status</th> <!-- Changed to Payment Status Column -->
                        </tr>
                      </thead>
                      <tbody id="appointment-body"></tbody> <!-- Changed to appointment-body -->
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-4 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">
                    <i class="fas fa-calendar-alt"></i>
                    Calendar
                  </h4>
                  <div id="inline-datepicker-example" class="datepicker"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- <div class="row">
            <div class="col-md-7 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">
                    <i class="fas fa-thumbtack"></i>
                    Todo
                  </h4>
                  <div class="add-items d-flex">
										<input type="text" class="form-control todo-list-input"  placeholder="What do you need to do today?">
										<button class="add btn btn-primary font-weight-bold todo-list-add-btn" id="add-task">Add</button>
									</div>
									<div class="list-wrapper">
										<ul class="d-flex flex-column-reverse todo-list">
											<li>
												<div class="form-check">
													<label class="form-check-label">
														<input class="checkbox" type="checkbox">
														Meeting with Alisa
													</label>
												</div>
												<i class="remove fa fa-times-circle"></i>
											</li>
											<li class="completed">
												<div class="form-check">
													<label class="form-check-label">
														<input class="checkbox" type="checkbox" checked>
														Call John
													</label>
												</div>
												<i class="remove fa fa-times-circle"></i>
											</li>
											<li>
												<div class="form-check">
													<label class="form-check-label">
														<input class="checkbox" type="checkbox">
														Create invoice
													</label>
												</div>
												<i class="remove fa fa-times-circle"></i>
											</li>
											<li>
												<div class="form-check">
													<label class="form-check-label">
														<input class="checkbox" type="checkbox">
														Print Statements
													</label>
												</div>
												<i class="remove fa fa-times-circle"></i>
											</li>
											<li class="completed">
												<div class="form-check">
													<label class="form-check-label">
														<input class="checkbox" type="checkbox" checked>
														Prepare for presentation
													</label>
												</div>
												<i class="remove fa fa-times-circle"></i>
											</li>
											<li>
												<div class="form-check">
													<label class="form-check-label">
														<input class="checkbox" type="checkbox">
														Pick up kids from school
													</label>
												</div>
												<i class="remove fa fa-times-circle"></i>
											</li>
										</ul>
									</div>
                </div>
              </div>
            </div>
            <!-- <div class="col-md-5 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">
                    <i class="fas fa-rocket"></i>
                    Projects
                  </h4>
                  <div class="table-responsive">
                    <table class="table">
                      <thead>
                        <tr>
                          <th>
                            Assigned to
                          </th>
                          <th>
                            Project name
                          </th>
                          <th>
                            Priority
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td class="py-1">
                            <img src="images/faces/face1.jpg" alt="profile" class="img-sm rounded-circle"/>
                          </td>
                          <td>
                            South Shyanne
                          </td>
                          <td>
                            <label class="badge badge-warning badge-pill">Medium</label>
                          </td>
                        </tr>
                        <tr>
                          <td class="py-1">
                            <img src="images/faces/face2.jpg" alt="profile" class="img-sm rounded-circle"/>
                          </td>
                          <td>
                            New Trystan
                          </td>
                          <td>
                            <label class="badge badge-danger badge-pill">High</label>
                          </td>
                        </tr>
                        <tr>
                          <td class="py-1">
                            <img src="images/faces/face3.jpg" alt="profile" class="img-sm rounded-circle"/>
                          </td>
                          <td>
                            East Helga
                          </td>
                          <td>
                            <label class="badge badge-success badge-pill">Low</label>
                          </td>
                        </tr>
                        <tr>
                          <td class="py-1">
                            <img src="images/faces/face4.jpg" alt="profile" class="img-sm rounded-circle"/>
                          </td>
                          <td>
                            Omerbury
                          </td>
                          <td>
                            <label class="badge badge-warning badge-pill">Medium</label>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div> -->
          <!-- </div>  -->
          <!-- <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-body">
                  <div class="d-md-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center mb-3 mb-md-0">
                      <button class="btn btn-social-icon btn-facebook btn-rounded">
                        <i class="fab fa-facebook-f"></i>
                      </button>
                      <div class="ml-4">
                        <h5 class="mb-0">Facebook</h5>
                        <p class="mb-0">813 friends</p>
                      </div>
                    </div>
                    <div class="d-flex align-items-center mb-3 mb-md-0">
                      <button class="btn btn-social-icon btn-twitter btn-rounded">
                        <i class="fab fa-twitter"></i>
                      </button>
                      <div class="ml-4">
                        <h5 class="mb-0">Twitter</h5>
                        <p class="mb-0">9000 followers</p>
                      </div>
                    </div>
                    <div class="d-flex align-items-center mb-3 mb-md-0">
                      <button class="btn btn-social-icon btn-google btn-rounded">
                        <i class="fab fa-google-plus-g"></i>
                      </button>
                      <div class="ml-4">
                        <h5 class="mb-0">Google plus</h5>
                        <p class="mb-0">780 friends</p>
                      </div>
                    </div>
                    <div class="d-flex align-items-center">
                      <button class="btn btn-social-icon btn-linkedin btn-rounded">
                        <i class="fab fa-linkedin-in"></i>
                      </button>
                      <div class="ml-4">
                        <h5 class="mb-0">Linkedin</h5>
                        <p class="mb-0">1090 connections</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
        </div>
        <!-- content-wrapper ends -->
        <!-- partial:partials/_footer.html -->
        <footer class="footer">
          <div class="d-sm-flex justify-content-center justify-content-sm-between">
            <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright Â© 2024 Morgphealth.
              All rights reserved.</span>
        </footer>
        <!-- partial -->
      </div>
      <!-- main-panel ends -->
    </div>
    <!-- page-body-wrapper ends -->
  </div>
  <!-- container-scroller -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const token = localStorage.getItem('authToken'); // Get the auth token from local storage

      if (!token) {
        // Redirect to login page if there is no token
        window.location.href = 'index.html'; // Replace 'login.html' with the URL you want to redirect to
      }
    });
  </script>
  <script>
    // Get DOM elements
    const todoInput = document.querySelector('.todo-list-input');
    const todoList = document.querySelector('.todo-list');
    const addButton = document.getElementById('add-task-todo');

    // Load existing tasks from local storage
    function loadTasks() {
      const tasks = JSON.parse(localStorage.getItem('todoList')) || [];
      todoList.innerHTML = tasks
        .map(
          (task, index) => `
          <li>
            <div class="form-check">
              <label class="form-check-label">
                <input class="checkbox" type="checkbox" ${task.completed ? 'checked' : ''}>
                ${task.text}
              </label>
            </div>
            <i class="remove fa fa-times-circle" data-index="${index}"></i>
          </li>
        `
        )
        .join('');
    }

    // Add a task to the list and save to local storage
    function addTask(event) {
      event.preventDefault();
      const taskText = todoInput.value.trim();
      if (taskText === '') return;

      const tasks = JSON.parse(localStorage.getItem('todoList')) || [];
      tasks.push({ text: taskText, completed: false });
      localStorage.setItem('todoList', JSON.stringify(tasks));
      todoInput.value = ''; // Clear the input field
      loadTasks(); // Reload the task list
    }

    // Remove a task from the list and local storage
    function removeTask(event) {
      if (event.target.classList.contains('remove')) {
        const taskIndex = event.target.getAttribute('data-index');
        const tasks = JSON.parse(localStorage.getItem('todoList')) || [];
        tasks.splice(taskIndex, 1);
        localStorage.setItem('todoList', JSON.stringify(tasks));
        loadTasks(); // Reload the task list
      }
    }

    // Event listeners
    addButton.addEventListener('click', addTask);
    todoList.addEventListener('click', removeTask);

    // Load tasks from local storage on page load
    loadTasks();
  </script>
  <script>
    // DOM elements
    const eventTitleInput = document.getElementById('event-title');
    const eventDescriptionInput = document.getElementById('event-description');
    const eventDateInput = document.getElementById('event-date');
    const addEventButton = document.getElementById('add-event-btn');
    const eventsListContainer = document.getElementById('events-list');

    // Load existing events from local storage
    function loadEvents() {
      const events = JSON.parse(localStorage.getItem('events')) || [];
      eventsListContainer.innerHTML = events
        .map(
          (event, index) => `
          <div class="events py-4 border-bottom px-3" data-index="${index}">
            <div class="wrapper d-flex mb-2">
              <i class="fa fa-times-circle text-primary mr-2 delete-event" data-index="${index}"></i>
              <span>${event.date}</span>
            </div>
            <p class="mb-0 font-weight-thin text-gray">${event.title}</p>
            <p class="text-gray mb-0">${event.description}</p>
          </div>
        `
        )
        .join('');
    }

    // Add event to the list and local storage
    function addEvent(event) {
      event.preventDefault();

      const title = eventTitleInput.value.trim();
      const description = eventDescriptionInput.value.trim();
      const date = eventDateInput.value.trim();

      if (!title || !description || !date) return;

      const newEvent = { title, description, date };

      // Save event to local storage
      const events = JSON.parse(localStorage.getItem('events')) || [];
      events.push(newEvent);
      localStorage.setItem('events', JSON.stringify(events));

      // Clear inputs
      eventTitleInput.value = '';
      eventDescriptionInput.value = '';
      eventDateInput.value = '';

      // Reload events
      loadEvents();
    }

    // Remove event from the list and local storage
    function removeEvent(event) {
      if (event.target.classList.contains('delete-event')) {
        const eventIndex = event.target.getAttribute('data-index');
        const events = JSON.parse(localStorage.getItem('events')) || [];
        events.splice(eventIndex, 1);
        localStorage.setItem('events', JSON.stringify(events));
        loadEvents(); // Reload the event list after deletion
      }
    }

    // Event listeners
    addEventButton.addEventListener('click', addEvent);
    eventsListContainer.addEventListener('click', removeEvent);

    // Load events on page load
    loadEvents();
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Get the staffId from localStorage
      const staffId = localStorage.getItem('staffId');

      if (staffId) {
        // Find the dashboard link and update its href with the staffId
        const dashboardLink = document.getElementById('dashboardLink');
        dashboardLink.href = `index-2.html?staffId=${staffId}`;
        const dashboardLink2 = document.getElementById('dashboardLink2');
        dashboardLink2.href = `index-2.html?staffId=${staffId}`;
      } else {
        // If no staffId found in localStorage, show an alert or handle accordingly
        console.log('No staffId found in localStorage');
      }
    });

  </script>

  <script>
    document.getElementById('signoutLink').addEventListener('click', async function (event) {
      event.preventDefault();  // Prevent the default behavior of the link

      // Get the staffId from the query string of the current URL
      const urlParams = new URLSearchParams(window.location.search);
      const staffId = urlParams.get('staffId'); // Retrieve the staffId from the query parameters

      if (!staffId) {
        alert("Staff ID not found in the URL");
        return;
      }

      try {
        // Make the POST request to the backend to log out and save the online duration
        const response = await fetch(`https://morgphealth.onrender.com/api/admin/logout/${staffId}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            // You might need to add authorization headers depending on your authentication method
            // 'Authorization': 'Bearer ' + token
          },
        });

        const data = await response.json();

        if (data.success) {
          // Handle successful logout (e.g., redirect to login page, show success message)
          localStorage.removeItem('authToken');
          localStorage.removeItem('staffId'); // Optional: Remove the staff ID if you stored it

          // console.log('Logged out successfully');
          window.location.href = 'index.html'; // Redirect to login page or other action
        } else {
          // Handle error (e.g., show an alert or message)
          alert('Error logging out: ' + data.message);
        }
      } catch (error) {
        console.error('Error during logout:', error);
        alert('Server error occurred during logout');
      }
    });
  </script>



  <script>
    fetch('https://morgphealth.onrender.com/api/admin/dashboard')
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          const dashData = data.dashData;

          // Update the HTML content with the data from the API
          document.getElementById('totalDoctors').innerText = dashData.doctors;
          document.getElementById('totalAppointments').innerText = dashData.appointments;
          document.getElementById('totalPatients').innerText = dashData.patients;
          document.getElementById('totalEarnings').innerText = dashData.totalEarnings; // Update earnings
          document.getElementById('totalSales').innerText = dashData.totalSales; // Update sales
        }
      })
      .catch(error => console.error('Error fetching data:', error));
  </script>



  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>




  <script>
    fetch('https://morgphealth.onrender.com/api/admin/dashboard')
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          const dashData = data.dashData;

          // Get total earnings and total sales
          const totalEarnings = parseFloat(dashData.totalEarnings);
          const totalSales = parseFloat(dashData.totalSales);

          // Update Total Earnings
          document.getElementById('totalEarningsDisplay').innerHTML = totalEarnings +
            ' <span class="text-muted h4 font-weight-normal">Sales</span>';

          // Update Total Sales
          document.getElementById('totalSalesDisplay').innerHTML = totalSales +
            ' <span class="text-muted h4 font-weight-normal">Sales</span>';

          // Initialize Total Earnings Chart (Bar Chart)
          var options1 = {
            chart: {
              type: 'bar',
              height: 300,
              toolbar: {
                show: false
              }
            },
            plotOptions: {
              bar: {
                borderRadius: 4,
                columnWidth: '60%',
              }
            },
            colors: ['rgb(64,38,109)'], // Custom color for the Earnings bar chart
            series: [{
              name: 'Earnings',
              data: [totalEarnings]
            }],
            xaxis: {
              categories: ['Total Earnings'],
              labels: {
                style: {
                  fontSize: '14px',
                  colors: ['#777']
                }
              }
            },
            yaxis: {
              labels: {
                style: {
                  fontSize: '14px',
                  colors: ['#777']
                }
              }
            },
            grid: {
              borderColor: '#f1f1f1',
              strokeDashArray: 5
            },
            dataLabels: {
              enabled: false
            },
            tooltip: {
              y: {
                formatter: function (val) {
                  return "$" + val.toFixed(2);
                }
              }
            }
          };

          var chart1 = new ApexCharts(document.querySelector("#sales-chart-1"), options1);
          chart1.render();

          // Initialize Total Sales Chart (Line Chart)
          var options2 = {
            chart: {
              type: 'line',
              height: 300,
              toolbar: {
                show: false
              }
            },
            colors: ['#FF6347'], // Custom color for the Total Sales line chart
            series: [{
              name: 'Total Sales',
              data: [0, totalSales * 0.25, totalSales * 0.5, totalSales * 0.75, totalSales] // Example of showing growth in sales
            }],
            xaxis: {
              categories: ['Start', 'Q1', 'Q2', 'Q3', 'Q4'], // Example quarterly sales
              labels: {
                style: {
                  fontSize: '14px',
                  colors: ['#777']
                }
              }
            },
            yaxis: {
              labels: {
                style: {
                  fontSize: '14px',
                  colors: ['#777']
                }
              }
            },
            grid: {
              borderColor: '#f1f1f1',
              strokeDashArray: 5
            },
            dataLabels: {
              enabled: false
            },
            tooltip: {
              y: {
                formatter: function (val) {
                  return "$" + val.toFixed(2);
                }
              }
            }
          };

          var chart2 = new ApexCharts(document.querySelector("#total-sales-chart"), options2);
          chart2.render();
        }
      })
      .catch(error => console.error('Error fetching data:', error));
  </script>




  <script>
    // Function to download data as JSON
    function downloadJSON(data, filename = 'chart-data.json') {
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = filename;
      link.click();
    }

    // Add event listener to download JSON button
    document.getElementById('download-json-btn').addEventListener('click', function () {
      // Prepare the chart data in a JSON format
      const earningsData = {
        label: 'Total Earnings',
        value: totalEarnings
      };


      // Combine the data from both charts into one JSON object
      const combinedData = [earningsData];

      // Trigger download of the combined data as JSON
      downloadJSON(combinedData);
    });
  </script>



  <script>
    // Function to convert chart data to CSV
    function convertToCSV(data) {
      const rows = [];
      const headers = Object.keys(data[0]); // Get headers from data object
      rows.push(headers.join(',')); // Add headers to CSV

      // Loop through the data and create CSV rows
      data.forEach(row => {
        rows.push(Object.values(row).join(','));
      });

      return rows.join('\n'); // Join all rows with a newline character
    }

    // Function to trigger CSV download
    function downloadCSV(data, filename = 'chart-data.csv') {
      const csv = convertToCSV(data);
      const blob = new Blob([csv], { type: 'text/csv' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = filename;
      link.click();
    }

    // Add event listener to download CSV button
    document.getElementById('download-csv-btn').addEventListener('click', function () {
      // Prepare the chart data in an array format (you can customize this as per your need)
      const earningsData = [{
        label: 'Total Earnings',
        value: totalEarnings
      }];



      // Combine data from both charts
      const combinedData = earningsData;

      // Trigger download of the combined data
      downloadCSV(combinedData);
    });
  </script>


  <script>
    // Function to download data as JSON
    function downloadJSON(data, filename = 'chart-data.json') {
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = filename;
      link.click();
    }

    // Add event listener to download JSON button
    document.getElementById('download-json-sales-btn').addEventListener('click', function () {
      // Prepare the chart data in a JSON format

      const salesData = {
        label: 'Total Sales',
        value: totalSales
      };

      // Combine the data from both charts into one JSON object
      const combinedData = [salesData];

      // Trigger download of the combined data as JSON
      downloadJSON(combinedData);
    });
  </script>







  <script>
    // Function to convert chart data to CSV
    function convertToCSV(data) {
      const rows = [];
      const headers = Object.keys(data[0]); // Get headers from data object
      rows.push(headers.join(',')); // Add headers to CSV

      // Loop through the data and create CSV rows
      data.forEach(row => {
        rows.push(Object.values(row).join(','));
      });

      return rows.join('\n'); // Join all rows with a newline character
    }

    // Function to trigger CSV download
    function downloadCSV(data, filename = 'chart-data.csv') {
      const csv = convertToCSV(data);
      const blob = new Blob([csv], { type: 'text/csv' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = filename;
      link.click();
    }

    // Add event listener to download CSV button
    document.getElementById('download-csv-sales-btn').addEventListener('click', function () {
      // Prepare the chart data in an array format (you can customize this as per your need)

      const salesData = [{
        label: 'Total Sales',
        value: totalSales
      }];

      // Combine data from both charts
      const combinedData = salesData;

      // Trigger download of the combined data
      downloadCSV(combinedData);
    });
  </script>




  <script>
    // Fetch insurance data and update the table
    async function fetchAndDisplayInsurance() {
      try {
        const response = await fetch('https://morgphealth.onrender.com/api/insurance/get');
        const data = await response.json();

        // Extract the first 10 insurance items
        const insuranceData = data.insuranceData.slice(0, 10);

        // Get table body reference
        const tableBody = document.querySelector('.table tbody');

        // Clear existing rows
        tableBody.innerHTML = '';

        // Add rows dynamically
        insuranceData.forEach((insurance) => {
          const { name, planType, price, totalPrice, createdAt } = insurance;

          const row = `
          <tr>
            <td>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="checkbox" class="form-check-input">
                </label>
              </div>
            </td>
            <td class="py-1">
              <div class="img-sm rounded-circle bg-primary profile-image-text">${name ? name.charAt(0).toUpperCase() : '?'}</div>
            </td>
            <td class="font-weight-bold">
              ${name || 'Unknown'}
            </td>
            <td>
              <label class="badge badge-light badge-pill">${planType}</label>
            </td>
            <td>
              ${price ? `$${price}` : 'N/A'}
            </td>
           
            <td>
              ${totalPrice ? `$${totalPrice}` : 'N/A'}
            </td>
            <td>
              ${new Date(createdAt).toLocaleDateString()}
            </td>
            <td>
              <i class="fas fa-ellipsis-v"></i>
            </td>
          </tr>
        `;

          tableBody.innerHTML += row;
        });
      } catch (error) {
        console.error('Error fetching insurance data:', error);
      }
    }

    // Fetch data on page load
    document.addEventListener('DOMContentLoaded', fetchAndDisplayInsurance);
  </script>

  <script>
    // Immediately executing script to fetch and render data
    (async function () {
      try {
        const response = await fetch('https://morgphealth.onrender.com/api/admin/dashboard');
        const data = await response.json();

        if (data.success) {
          const latestAppointments = data.dashData.latestAppointments;
          const appointmentBody = document.querySelector('#appointment-body');  // Changed selector to #appointment-body

          // Clear existing rows
          appointmentBody.innerHTML = '';

          // Render latest appointments
          latestAppointments.slice(0, 15).forEach((appointment) => {
            const paymentStatus = appointment.paymentSuccessful ? 'Paid' : 'Pending';
            const paymentStatusClass = appointment.paymentSuccessful ? 'badge-success' : 'badge-danger';

            // Assuming the doctor information is within `appointment.doctorData`
            const doctorName = appointment.docData ? appointment.docData.name : 'N/A';


            const row = `
            <tr>
              <td class="font-weight-bold">${appointment.userData.name}</td>
              <td class="text-muted">${appointment.slotDate} at ${appointment.slotTime}</td>
              <td>${appointment.userData.email}</td>
              <td class="font-weight-bold">${doctorName}</td> <!-- Added Doctor Name -->
              <td>
                <label class="badge ${paymentStatusClass} badge-pill">${paymentStatus}</label> <!-- Payment Status -->
              </td>
            </tr>
          `;
            appointmentBody.innerHTML += row;  // Append the row to the appointmentBody
          });
        }
      } catch (error) {
        console.error('Error fetching data:', error);
      }
    })();
  </script>






  <script>
    // Fetch the insurance data from the API
    fetch('https://morgphealth.onrender.com/api/insurance/get')
      .then(response => response.json()) // Assuming the response is in JSON format
      .then(data => {
        // Get the total number of insurances (length of the array)
        const totalInsuranceCount = data.insuranceData.length;

        // Update the 'totalInsurance' element with the total number of insurances
        document.getElementById('totalInsurance').textContent = totalInsuranceCount;
      })
      .catch(error => {
        console.error('Error fetching insurance data:', error);
        // Handle errors (e.g., set a default value)
        document.getElementById('totalInsurance').textContent = '0';
      });

  </script>


  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Fetch all staff details and filter by staffId
      const getStaffDetails = async () => {
        const urlParams = new URLSearchParams(window.location.search);
        const staffId = urlParams.get('staffId'); // Get staffId from query parameter
        if (!staffId) {
          console.error('No staffId provided');
          return;
        }

        try {
          // Fetch all staff data from the backend API
          const response = await fetch('https://morgphealth.onrender.com/api/staff');

          // Check if the response is valid
          if (!response.ok) {
            throw new Error('Failed to fetch staff data');
          }

          const staffList = await response.json();

          // Find the staff with the provided staffId
          const staff = staffList.find(staff => staff._id === staffId);

          if (staff) {
            // Update the DOM elements with the staff details
            const staffNameElement = document.querySelector('.name');
            const staffDesignationElement = document.querySelector('.designation');

            staffNameElement.textContent = `Welcome ${staff.name}`;
            staffDesignationElement.textContent = staff.admin ? 'Super Admin' : 'Staff';

            // Hide the Form Elements link if the staff is not an admin
            if (!staff.admin) {
              const formElementsLink = document.querySelector('#form-elements').parentElement;
              formElementsLink.style.display = 'none'; // Hide the entire list item
            }
          } else {
            console.error('Staff not found');
          }
        } catch (error) {
          console.error('Error fetching staff details:', error);
        }
      };

      // Call the function
      getStaffDetails();
    });
  </script>





  <script>
    // Fetch data from the backend
    async function fetchDashboardData() {
      try {
        const response = await fetch('https://morgphealth.onrender.com/api/admin/dashboard');
        const data = await response.json();

        if (data.success) {
          renderRegionChart(data.dashData.usersGenderRegion);
        }
      } catch (error) {
        console.error('Error fetching dashboard data:', error);
      }
    }

    // Render the pie chart with the region data
    function renderRegionChart(regionData) {
      // Prepare the data for the pie chart
      const regionLabels = Object.keys(regionData);
      const regionValues = regionLabels.map(region => {
        // Sum the male, female, and other counts for each region
        const regions = regionData[region];
        return Object.values(regions).reduce((acc, count) => acc + count, 0);
      });

      // Create a pie chart using Chart.js
      const ctx = document.getElementById('user-region-chart').getContext('2d');
      new Chart(ctx, {
        type: 'pie',
        data: {
          labels: regionLabels,
          datasets: [{
            data: regionValues,
            backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#FF8C00', '#32CD32'], // You can adjust colors
            hoverBackgroundColor: ['#FF6F91', '#6EC1E4', '#FFD166', '#FFA500', '#66CDAA'],
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'top',
            },
            tooltip: {
              callbacks: {
                label: function (tooltipItem) {
                  const region = tooltipItem.label;
                  const count = tooltipItem.raw;
                  return `${region}: ${count} users`;
                }
              }
            }
          }
        }
      });
    }

    // Wait for the DOM to fully load before running the script
    document.addEventListener('DOMContentLoaded', function () {
      fetchDashboardData(); // Call the function when DOM is fully loaded
    });

  </script>


  <!-- Include Plotly.js -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <script>
    // Fetch the data from your backend API
    fetch('https://morgphealth.onrender.com/api/admin/dashboard')
      .then(response => response.json())  // Parse the JSON response
      .then(data => {
        // Extract the doctors' gender distribution data from the response
        const plotlyData = {
          doctorsGender: {
            labels: ['Male', 'Female', 'Other'],
            values: [
              data.dashData.doctorsGender.male,   // Male count from the backend
              data.dashData.doctorsGender.female, // Female count from the backend
              data.dashData.doctorsGender.other   // Other count from the backend
            ]
          }
        };

        // Create the pie chart data
        const doctorsGenderData = {
          labels: plotlyData.doctorsGender.labels,
          values: plotlyData.doctorsGender.values,
          type: 'pie',
          textinfo: 'percent',
          marker: {
            colors: ['#FF6384', '#36A2EB', '#FFCE56']  // Customize colors
          }
        };

        // Layout for the pie chart
        const doctorsGenderLayout = {
          title: 'Doctors Gender Distribution',  // Title of the chart
          showlegend: true,                      // Display the legend
          height: 400,                           // Set chart height
          width: 'calc(100% - 50px)',            // Reduce width by 50px
          autosize: true                         // Make the chart responsive
        };

        // Render the chart using Plotly
        Plotly.newPlot('doctors-gender-chart', [doctorsGenderData], doctorsGenderLayout);
      })
      .catch(error => {
        console.error('Error fetching data:', error);
      });
  </script>


  <script>

    document.addEventListener('DOMContentLoaded', () => {
      const token = localStorage.getItem('authToken');
      const staffId = localStorage.getItem('staffId'); // Get the staffId from local storage
      const currentPage = window.location.pathname.split('/').pop(); // Get the current page name

      if (!token || !staffId) {
        // Redirect to login if token or staffId is missing
        if (currentPage !== 'index.html') {
          window.location.href = 'index.html';
        }
      }
    });
  </script>

  <!-- plugins:js -->
  <script src="../../vendors/js/vendor.bundle.base.js"></script>
  <script src="../../vendors/js/vendor.bundle.addons.js"></script>
  <!-- endinject -->
  <!-- Plugin js for this page-->
  <!-- End plugin js for this page-->
  <!-- inject:js -->
  <script src="../../js/off-canvas.js"></script>
  <script src="../../js/hoverable-collapse.js"></script>
  <script src="../../js/misc.js"></script>
  <script src="../../js/settings.js"></script>
  <script src="../../js/todolist.js"></script>
  <!-- endinject -->
  <!-- Custom js for this page-->
  <script src="../../js/dashboard.js"></script>
  <!-- End custom js for this page-->
</body>


<!-- Mirrored from www.urbanui.com/melody/template/pages/layout/horizontal-menu.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 15 Sep 2018 06:05:55 GMT -->
</html>
